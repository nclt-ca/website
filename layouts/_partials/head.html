<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />

{{- $title := site.Title -}}
{{- $description := site.Params.description -}}
{{- $url := .Permalink -}}
{{- $image := "" -}}
{{- $imageAlt := site.Title -}}

{{- if .IsHome -}}
  {{- $title = site.Title -}}
  {{- $description = site.Params.description -}}
  {{- with site.Params.heroImage -}}
    {{- $heroImg := resources.Get . -}}
    {{- if $heroImg -}}
      {{- $image = $heroImg.Permalink -}}
    {{- else -}}
      {{- $image = (printf "%s%s" site.BaseURL .) -}}
    {{- end -}}
  {{- end -}}
{{- else -}}
  {{- $title = printf "%s | %s" .Title site.Title -}}
  {{- $description = .Summary | plainify | truncate 200 | default .Description | default site.Params.description -}}
  {{- $imageAlt = .Title -}}
{{- end -}}

<title>{{ $title }}</title>

<!-- OpenGraph Meta Tags -->
<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ $url }}" />
<meta property="og:site_name" content="{{ site.Title }}" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="{{ site.Language.LanguageCode | default "en_US" }}" />
{{- if $image -}}
  <meta property="og:image" content="{{ $image }}" />
  <meta property="og:image:alt" content="{{ $imageAlt }}" />
{{- end -}}

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description }}" />
{{- if $image -}}
  <meta name="twitter:image" content="{{ $image }}" />
  <meta name="twitter:image:alt" content="{{ $imageAlt }}" />
{{- end -}}

<!-- SEO Meta Tags -->
<meta name="description" content="{{ $description }}" />
<link rel="canonical" href="{{ $url }}" />


<!-- Bootstrap CSS - Must load BEFORE custom styles -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
  crossorigin="anonymous"
/>

<!-- Project Style - Loads AFTER Bootstrap to override variables -->
{{ with resources.Get "scss/main.scss" }}
  {{ $opts := dict "transpiler" "libsass"
    "outputStyle" "expanded"
    "targetPath" "css/main.css"
  }}
  {{ with . | toCSS $opts }}
    {{ if hugo.IsDevelopment }}
      <link rel="stylesheet" href="{{ .RelPermalink }}" />
    {{ else }}
      {{ with . | minify | fingerprint }}
        <link
          rel="stylesheet"
          href="{{ .RelPermalink }}"
          integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous"
        />
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}


<!-- Bootstrap Icons -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
/>

<!-- Bootstrap JS Bundle (includes Popper) -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
  crossorigin="anonymous"
></script>

{{- with resources.Get "js/main.js" }}
  {{- $opts := dict
    "minify" (not hugo.IsDevelopment)
    "sourceMap" (cond hugo.IsDevelopment "external" "")
    "targetPath" "js/main.js"
  }}
  {{- with . | js.Build $opts }}
    {{- if hugo.IsDevelopment }}
      <script src="{{ .RelPermalink }}"></script>
    {{- else }}
      {{- with . | fingerprint }}
        <script
          src="{{ .RelPermalink }}"
          integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous"
        ></script>
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}
